<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Lyrics</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <style>
        header.site-header h1{
            color: var(--text);
            margin: 1rem 0 0;
            text-align: center;
        }

        /* Responsive grid for lyrics tiles */
        .lyrics-page{
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            padding: 2rem;
            justify-items: center;
        }

        /* Dark card for each lyrics block */
        .lyrics-block{
            width: 100%;
            max-width: 700px;
            background: rgba(17,20,26,.45);
            color: var(--text);
            border: 1px solid var(--border);
            border-left: 4px solid var(--primary);
            border-radius: 12px;
            padding: 1.25rem 1.5rem;
            text-align: left;
            box-shadow: 0 10px 26px rgba(0,0,0,.25);
            backdrop-filter: blur(6px) saturate(110%);
        }

        /* Quote text */
        .lyrics-block blockquote{
            margin: 0 0 10px 0;
            font-style: italic;
            color: #e2e8f0;
        }

        /* Song/artist label */
        .song-info{
            margin-top: .5rem;
            font-weight: 800;
            color: var(--primary);
            letter-spacing: .2px;
        }

        /* Centered sticky back button (matches theme) */
        .sticky-back-button{
            position: fixed; left: 50%; bottom: 20px; transform: translateX(-50%);
            z-index: 1000;
        }
        .sticky-back-button a{
            display: inline-block;
            padding: 10px 20px;
            background: linear-gradient(180deg, var(--primary-600), var(--primary-700));
            color: #fff; font-weight: 800; text-decoration: none;
            border-radius: 10px;
            border: 1px solid transparent;
            transition: filter .18s ease, transform .08s ease;
        }
        .sticky-back-button a:hover{ filter: brightness(1.06); transform: translateY(-1px); }
        .sticky-back-button a:focus-visible{ outline: none; box-shadow: 0 0 0 4px var(--ring); }

        /* Lyrics page header variant */
        header.site-header.slim{
            background: linear-gradient(180deg, rgba(12,12,12,.72), rgba(12,12,12,.54));
            backdrop-filter: blur(10px) saturate(120%);
            -webkit-backdrop-filter: blur(10px) saturate(120%);
            border-bottom: 1px solid rgba(255,106,0,.28);
        }
        header.site-header.slim h1{
            color: var(--primary);
            text-shadow: 0 0 10px rgba(255,106,0,.35);
            margin: 0;
        }
    </style>
</head>
<body data-city="baltimore">
    <!-- Apply saved city theme on this page too -->
    <script>
        (function() {
            try {
                const saved = localStorage.getItem('selectedCity') || 'baltimore';
                document.body.dataset.city = saved;
                
                // Apply theme colors
                const themes = {
                    baltimore: {
                        primary: '#ff6a00',
                        primary600: '#ff5c00',
                        primary700: '#ef4b00',
                        ring: 'rgba(255,106,0,.35)'
                    },
                    dc: {
                        primary: '#c41e3a',
                        primary600: '#b01830',
                        primary700: '#9a1528',
                        ring: 'rgba(196,30,58,.35)'
                    },
                    chicago: {
                        primary: '#41b6e6',
                        primary600: '#35a5d4',
                        primary700: '#2994c2',
                        ring: 'rgba(65,182,230,.35)'
                    }
                };
                
                const theme = themes[saved];
                if (theme) {
                    const r = document.documentElement;
                    r.style.setProperty('--primary', theme.primary);
                    r.style.setProperty('--primary-600', theme.primary600);
                    r.style.setProperty('--primary-700', theme.primary700);
                    r.style.setProperty('--ring', theme.ring);
                }
            } catch(e) {}
        })();
    </script>

    <header class="site-header slim">
        <div class="wrap">
            <h1>All Lyrics</h1>
        </div>
    </header>

    <section class="lyrics-page">
        {% for entry in lyrics %}
            <div class="lyrics-block">
                <blockquote>{{ entry.lyrics.replace('\n', '<br>') | safe }}</blockquote>
                <p class="song-info">{{ entry.song }} by {{ entry.artist }}</p>
            </div>
        {% endfor %}
    </section>

    <!-- Centered sticky back button -->
    <div class="sticky-back-button">
        <a href="{{ url_for('index') }}">← Back to Main Page</a>
    </div>

    <!-- Footer with GitHub and quote -->
    <footer class="footer">
        <p>
            <a href="https://github.com/H-Bombmxpwr/Landing-Page" target="_blank" class="github-footer">
                <i class="fab fa-github"></i>
            </a>
            <span id="year"></span> - Hunter Baisden
        </p>
        <div id="funnyQuote">Loading a quote...</div>
    </footer>

    <script>
        // Set year
        document.getElementById('year').textContent = new Date().getFullYear();

        // Load quote
        async function fetchQuote() {
            try {
                const response = await fetch('/api/quote');
                if (!response.ok) throw new Error(`HTTP error ${response.status}`);
                const data = await response.json();
                if (data.quote && data.author) {
                    document.getElementById('funnyQuote').innerHTML = `"${data.quote}" — ${data.author}`;
                } else {
                    throw new Error("Invalid response");
                }
            } catch {
                document.getElementById('funnyQuote').innerHTML = "Couldn't load a quote.";
            }
        }

        fetchQuote();
    </script>
</body>
</html>